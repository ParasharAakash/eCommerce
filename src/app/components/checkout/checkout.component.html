<div class="form-row mt-5">
  <div class="offset-sm-2">
    <h2>Cardholder Information</h2>
  </div>
</div>
<div *ngIf="_authService.loggedIn() && loggedUser" class="row p-5">
  <div class="col-md-6">
    <form
      (ngSubmit)="checkout()"
      *ngIf="loggedUser"
      #formData="ngForm"
      class="needs-validation"
      novalidate
    >
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="first_name" class="asterisk-label">First name</label>
          <input
            type="text"
            required
            class="form-control"
            name="loggedUser.first_name"
            [(ngModel)]="loggedUser.first_name"
            #first_name="ngModel"
          />
        </div>
        <div class="form-group col-md-4">
          <label for="last_name" class="asterisk-label">Last name</label>
          <input
            type="text"
            required
            class="form-control"
            name="loggedUser.last_name"
            [(ngModel)]="loggedUser.last_name"
            #last_name="ngModel"
          />
        </div>
        <div class="form-group col-md-4">
          <label for="email" class="asterisk-label">Email</label>
          <input
            type="email"
            required
            class="form-control"
            name="loggedUser.local.email"
            [(ngModel)]="loggedUser.local.email"
            #email="ngModel"
          />
        </div>
      </div>
      <div class="form-group">
        <label for="address1" class="asterisk-label">Address 1</label>
        <input
          type="text"
          required
          class="form-control"
          name="loggedUser.address.street"
          [(ngModel)]="loggedUser.address.street"
          #street="ngModel"
        />
      </div>
      <div class="form-group">
        <label for="address2">Address 2</label>
        <input
          type="text"
          class="form-control"
          name="loggedUser.address.street2"
          [(ngModel)]="loggedUser.address.street2"
          #street2="ngModel"
        />
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="city" class="asterisk-label">City</label>
          <input
            type="text"
            required
            class="form-control"
            name="loggedUser.address.city"
            [(ngModel)]="loggedUser.address.city"
            #city="ngModel"
          />
        </div>
        <div class="form-group col-md-4">
          <label for="state" class="asterisk-label">State</label>
          <select
            class="form-control"
            required
            name="loggedUser.address.state"
            [(ngModel)]="loggedUser.address.state"
            #state="ngModel"
          >
            <option selected>Choose state...</option>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District Of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
          </select>
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip" class="asterisk-label">Zip</label>
          <input
            type="text"
            required
            minlength="5"
            class="form-control"
            name="loggedUser.address.zip"
            [(ngModel)]="loggedUser.address.zip"
            #zip="ngModel"
          />
        </div>
      </div>
      <div class="form-row">
        <div class="col-sm-auto form-group">
          <label for="cc_number">Credit card number</label>
          <input type="text" class="form-control" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="cc_exp_month">Expiration month</label>
          <select class="form-control">
            <option selected>Choose month</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
          </select>
        </div>
        <div class="col-sm-4 form-group">
          <label for="cc_exp_yr">Expiration year</label>
          <input type="text" class="form-control" />
        </div>
        <div class="col-sm-4 form-group">
          <label for="cc_cvc">CVC</label>
          <input type="text" class="form-control" />
        </div>
      </div>
      <button (click)="creditCardInfo()" type="submit" class="btn btn-primary">
        Confirm billing information
      </button>
    </form>
  </div>
  <div *ngIf="cart" class="offset-md-2 col-md-4">
    <div class="card border-info mb-3">
      <div class="card-header bg-transparent">
        <div class="row justify-content-between">
          <div class="col-auto">
            <h4>Order summary</h4>
          </div>
          <div class="col-auto">
            <a [routerLink]="['/cartify/cart']" class="float-right"
              >View cart</a
            >
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row justify-content-between mb-3">
          <div class="col-auto">
            <strong><h5 class="card-text">Subtotal</h5></strong>
          </div>
          <div class="col-auto">
            <h5 class="card-text float-right">${{ cart.totalPrice }}.00</h5>
          </div>
        </div>
        <div class="row justify-content-between">
          <div class="col-auto">
            <h5 class="card-text">Tax</h5>
          </div>
          <div class="col-auto">
            <h5 class="card-text float-right">${{ tax }}</h5>
          </div>
        </div>
      </div>
      <div class="card-footer bg-transparent">
        <div class="row justify-content-between">
          <div class="col-auto">
            <strong><h4>Total</h4></strong>
          </div>
          <div class="col-auto">
            <strong
              ><p class="card-text float-right">${{ totalSum }}</p></strong
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CONFIRMATION MODAL -->
<button
  type="button"
  class="btn btn-secondary"
  data-toggle="modal"
  data-target="#confirmationModal"
>
  Confirm information
</button>
<div
  class="modal fade"
  id="confirmationModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button
          id="close-btn"
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span id="close-icon" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h4 class="text-center">Confirm purchase?</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary">Purchase</button>
      </div>
    </div>
  </div>
</div>
